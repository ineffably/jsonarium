{
  "type": "class",
  "name": "Shader",
  "sourcePath": "rendering/renderers/shared/shader/Shader.ts",
  "extends": "EventEmitter",
  "implements": [],
  "description": "A record of {@link BindGroup}'s used by the shader. `Record<number, BindGroup>` / export type ShaderGroups = Record<number, BindGroup>; interface ShaderBase { /** The WebGL program used by the WebGL renderer. */ glProgram?: GlProgram /** The WebGPU program used by the WebGPU renderer. */ gpuProgram?: GpuProgram /** A number that uses two bits on whether the shader is compatible with the WebGL renderer and/or the WebGPU renderer. 0b00 - not compatible with either 0b01 - compatible with WebGL 0b10 - compatible with WebGPU This is automatically set based on if a {@link GlProgram} or {@link GpuProgram} is provided. / compatibleRenderers?: number } /** A base interface for shaders that includes the common properties. / export interface GlShaderWith extends ShaderBase { /** The WebGL program used by the WebGL renderer. */ glProgram: GlProgram } /** A base interface for shaders that includes the common properties. / export interface GpuShaderWith extends ShaderBase { /** The WebGPU program used by the WebGPU renderer. */ gpuProgram: GpuProgram } /** A descriptor for a shader with groups. This is used to define a shader that uses {@link BindGroup}'s. / export interface ShaderWithGroupsDescriptor { /** A record of {@link BindGroup}'s used by the shader. */ groups: ShaderGroups; /** an optional map of how to bind the groups. This is automatically generated by reading the WebGPU program */ groupMap?: Record<string, Record<string, any>>; } interface ShaderWithResourcesDescriptor { /** A key value of uniform resources used by the shader. Under the hood pixi will look at the provided shaders and figure out where the resources are mapped. Its up to you to make sure the resource key matches the uniform name in the webGPU program. WebGL is a little more forgiving! / resources?: Record<string, any>; } interface GroupsData { group: number binding: number name: string } /** A descriptor for a shader / export type ShaderWith = GlShaderWith | GpuShaderWith; /** A descriptor for a shader with groups. / export type ShaderWithGroups = ShaderWithGroupsDescriptor & ShaderWith; /** A descriptor for a shader with resources. This is an easier way to work with uniforms. especially when you are not working with bind groups / export type ShaderWithResources = ShaderWithResourcesDescriptor & ShaderWith; /** A shader that can be used with both WebGL and WebGPU. / export interface IShaderWithResources extends ShaderWithResourcesDescriptor, ShaderBase {} /** A descriptor for a shader that can be used with both WebGL and WebGPU. / export type ShaderDescriptor = ShaderWithGroups & ShaderWithResources; /** A descriptor for a shader with resources and groups. / type GlShaderFromWith = { gpu?: GpuProgramOptions, gl: GlProgramOptions }; /** A descriptor for a shader with groups and resources. / type GpuShaderFromWith = { gpu: GpuProgramOptions, gl?: GlProgramOptions }; /** A descriptor for a shader that can be used with both WebGL and WebGPU. / export type ShaderFromGroups = (GlShaderFromWith | GpuShaderFromWith) & Omit<ShaderWithGroups, 'glProgram' | 'gpuProgram'>; /** A descriptor for a shader that can be used with both WebGL and WebGPU. / export type ShaderFromResources = (GlShaderFromWith | GpuShaderFromWith) & Omit<ShaderWithResources, 'glProgram' | 'gpuProgram'>; /** The Shader class is an integral part of the PixiJS graphics pipeline. Central to rendering in PixiJS are two key elements: A [shader] and a [geometry]. The shader incorporates a {@link GlProgram} for WebGL or a {@link GpuProgram} for WebGPU, instructing the respective technology on how to render the geometry. The primary goal of the Shader class is to offer a unified interface compatible with both WebGL and WebGPU. When constructing a shader, you need to provide both a WebGL program and a WebGPU program due to the distinctions between the two rendering engines. If only one is provided, the shader won't function with the omitted renderer. Both WebGL and WebGPU utilize the same resource object when passed into the shader. Post-creation, the shader's interface remains consistent across both WebGL and WebGPU. The sole distinction lies in whether a glProgram or a gpuProgram is employed. Modifying shader uniforms, which can encompass: - TextureSampler {@link TextureStyle} - TextureSource {@link TextureSource} - UniformsGroups {@link UniformGroup} const shader = new Shader({ glProgram: glProgram, gpuProgram: gpuProgram, resources: { uTexture: texture.source, uSampler: texture.sampler, uColor: [1, 0, 0, 1], }, }); // update the uniforms shader.resources.uColor[1] = 1; shader.resources.uTexture = texture2.source;",
  "category": "rendering",
  "deprecated": false,
  "methods": [
    {
      "name": "super",
      "params": [],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "compatibleRenderers === undefined",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "gpuProgram",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "glProgram",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "!resources && !groups",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "resources && groups",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "Error",
      "params": [
        {
          "name": "'[Shader] Cannot have both resources and groups'",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "!gpuProgram && groups && !groupMap",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "Error",
      "params": [
        {
          "name": "'[Shader] No group map or WebGPU shader provided - consider using resources instead.'",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "!gpuProgram && groups && groupMap",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "for",
      "params": [
        {
          "name": "const i in groupMap",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "for",
      "params": [
        {
          "name": "const j in groupMap[i]",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "gpuProgram && groups && !groupMap",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "forEach",
      "params": [
        {
          "name": "(data",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "resources",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "gpuProgram",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "forEach",
      "params": [
        {
          "name": "(data",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "for",
      "params": [
        {
          "name": "const i in resources",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "nameHash[i]",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "!groups[99]",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "BindGroup",
      "params": [],
      "returnType": null,
      "description": null
    },
    {
      "name": "push",
      "params": [
        {
          "name": "groups[99]",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "for",
      "params": [
        {
          "name": "const i in resources",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "!(value.source",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "UniformGroup",
      "params": [
        {
          "name": "value",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "data",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "!groups[data.group]",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "BindGroup",
      "params": [],
      "returnType": null,
      "description": null
    },
    {
      "name": "push",
      "params": [
        {
          "name": "groups[data.group]",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "setResource",
      "params": [
        {
          "name": "value",
          "type": null
        },
        {
          "name": "data.binding",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "addResource",
      "params": [
        {
          "name": "name",
          "type": "string",
          "optional": false,
          "default": null
        },
        {
          "name": "groupIndex",
          "type": "number",
          "optional": false,
          "default": null
        },
        {
          "name": "bindIndex",
          "type": "number",
          "optional": false,
          "default": null
        }
      ],
      "returnType": "void",
      "description": "Sometimes a resource group will be provided later (for example global uniforms) In such cases, this method can be used to let the shader know about the group."
    },
    {
      "name": "if",
      "params": [
        {
          "name": "!this.groups[groupIndex]",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "BindGroup",
      "params": [],
      "returnType": null,
      "description": null
    },
    {
      "name": "push",
      "params": [
        {
          "name": "this.groups[groupIndex]",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "for",
      "params": [
        {
          "name": "const i in nameHash",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "defineProperty",
      "params": [
        {
          "name": "uniformsOut",
          "type": null
        },
        {
          "name": "data.name",
          "type": null
        },
        {
          "name": "{\n                get(",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "getResource",
      "params": [
        {
          "name": "data.binding",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "set",
      "params": [
        {
          "name": "value",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "setResource",
      "params": [
        {
          "name": "value",
          "type": null
        },
        {
          "name": "data.binding",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "destroy",
      "params": [
        {
          "name": "destroyPrograms = false",
          "type": null
        }
      ],
      "returnType": "void",
      "description": "Use to destroy the shader when its not longer needed. It will destroy the resources and remove listeners. Make sure its not being used by other shaders!"
    },
    {
      "name": "emit",
      "params": [
        {
          "name": "'destroy'",
          "type": null
        },
        {
          "name": "this",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "destroyPrograms",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "destroy",
      "params": [],
      "returnType": null,
      "description": null
    },
    {
      "name": "destroy",
      "params": [],
      "returnType": null,
      "description": null
    },
    {
      "name": "removeAllListeners",
      "params": [],
      "returnType": null,
      "description": null
    },
    {
      "name": "forEach",
      "params": [
        {
          "name": "(bindGroup",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "destroy",
      "params": [],
      "returnType": null,
      "description": null
    },
    {
      "name": "from",
      "params": [
        {
          "name": "options",
          "type": "ShaderFromGroups",
          "optional": false,
          "default": null
        }
      ],
      "returnType": "Shader",
      "description": "A short hand function to create a shader based of a vertex and fragment shader."
    },
    {
      "name": "from",
      "params": [
        {
          "name": "options",
          "type": "ShaderFromResources",
          "optional": false,
          "default": null
        }
      ],
      "returnType": "Shader",
      "description": null
    },
    {
      "name": "from",
      "params": [
        {
          "name": "options",
          "type": "ShaderFromGroups & ShaderFromResources",
          "optional": false,
          "default": null
        }
      ],
      "returnType": "Shader",
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "gpu",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "from",
      "params": [
        {
          "name": "gpu",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "if",
      "params": [
        {
          "name": "gl",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "from",
      "params": [
        {
          "name": "gl",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    },
    {
      "name": "Shader",
      "params": [
        {
          "name": "{\n            gpuProgram",
          "type": null
        },
        {
          "name": "glProgram",
          "type": null
        },
        {
          "name": "...rest\n        }",
          "type": null
        }
      ],
      "returnType": null,
      "description": null
    }
  ],
  "properties": []
}